<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>  </title>
  <meta name="description" content="Hugo is a general-purpose website framework. Technically speaking, Hugo is a static site generator. Unlike systems that dynamically build a page with each visitor request, Hugo builds pages when you create or update your content. Since websites are viewed far more often than they are edited, Hugo is designed to provide an optimal viewing experience for your website’s end users and an ideal writing experience for website authors.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="" />
<meta property="og:description" content="Visitor - Day 12 The Visitor pattern helps adding the new behavior into a separate class called visitor, instead of trying to integrate it into existing classes (change the existing classes).
The new behavior acts as a method of visitor, takes the original object as an argument. The original object must &ldquo;allow&rdquo; visitor to access its data.
The behavior can be executed over objects of different classes, the visitor class may define a set of methods, each of which could take arguments of different types, like this:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://phatngluu.github.io/posts/softwaredesign/behavioral/visitor/" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="Visitor - Day 12 The Visitor pattern helps adding the new behavior into a separate class called visitor, instead of trying to integrate it into existing classes (change the existing classes).
The new behavior acts as a method of visitor, takes the original object as an argument. The original object must &ldquo;allow&rdquo; visitor to access its data.
The behavior can be executed over objects of different classes, the visitor class may define a set of methods, each of which could take arguments of different types, like this:"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://phatngluu.github.io/css/style-white.css">
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://phatngluu.github.io/images/favicon.ico" />

  
  
  
</head>
<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://phatngluu.github.io/posts/softwaredesign/composite/">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://phatngluu.github.io/posts/softwaredesign/behavioral/observer/">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&text=">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&is_video=false&description=">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=&body=Check out this article: https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-stumbleupon " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-digg " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&name=&description=Visitor%20-%20Day%2012%20The%20Visitor%20pattern%20helps%20adding%20the%20new%20behavior%20into%20a%20separate%20class%20called%20visitor%2c%20instead%20of%20trying%20to%20integrate%20it%20into%20existing%20classes%20%28change%20the%20existing%20classes%29.%0aThe%20new%20behavior%20acts%20as%20a%20method%20of%20visitor%2c%20takes%20the%20original%20object%20as%20an%20argument.%20The%20original%20object%20must%20%26ldquo%3ballow%26rdquo%3b%20visitor%20to%20access%20its%20data.%0aThe%20behavior%20can%20be%20executed%20over%20objects%20of%20different%20classes%2c%20the%20visitor%20class%20may%20define%20a%20set%20of%20methods%2c%20each%20of%20which%20could%20take%20arguments%20of%20different%20types%2c%20like%20this%3a">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&t=">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#structure">Structure</a>
      <ul>
        <li><a href="#pseudocode">Pseudocode</a></li>
      </ul>
    </li>
    <li><a href="#singlebadmintontournamentvisitor">SingleBadmintonTournamentVisitor</a></li>
  </ul>
</nav>
    </div>
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
          
        </div>
        
        
      </div>
    </header>

  
    <div class="content" itemprop="articleBody">
      <h1 id="visitor---day-12">Visitor - Day 12</h1>
<p>The Visitor pattern helps <strong>adding the new behavior</strong> into a separate class called <em>visitor</em>, <strong>instead</strong> of trying to <strong>integrate</strong> it into <strong>existing classes</strong> (change the existing classes).</p>
<p>The new behavior acts as a method of <em>visitor</em>, takes the original object as an argument. The original object must &ldquo;allow&rdquo; <em>visitor</em> to access its data.</p>
<p>The behavior can be executed over objects of different classes, the visitor class may define a set of methods, each of which could take arguments of different types, like this:</p>
<pre><code>class ExportVisitor implements Visitor is
    method doForCity(City c) { ... }
    method doForIndustry(Industry f) { ... }
    method doForSightSeeing(SightSeeing ss) { ... }
    // ...
</code></pre><p>Using &ldquo;Double Dispatch&rdquo; techniques. Since the objects know their own classes, they’ll be able to pick a proper method on the visitor less awkwardly. They “accept” a visitor and tell it what visiting method should be executed.</p>
<pre><code>// City
class City is
    method accept(Visitor v) is
        v.doForCity(this)
    // ...

// Industry
class Industry is
    method accept(Visitor v) is
        v.doForIndustry(this)
    // ...
</code></pre><p>In client code:</p>
<pre><code>// Client code
foreach (Node node in graph)
    node.accept(exportVisitor)
</code></pre><h2 id="structure">Structure</h2>
<p><img src="https://refactoring.guru/images/patterns/diagrams/visitor/structure-en-indexed.png" alt="Structure of the Visitor design pattern"></p>
<ol>
<li>The <strong>Visitor</strong> interface declares a set of visiting methods that can take concrete elements of an object structure as arguments. These methods may have the same names if the program is written in a language that supports overloading, but the type of their parameters must be different.</li>
<li>Each <strong>Concrete Visitor</strong> implements several versions of the same behaviors, tailored for different concrete element classes.</li>
<li>The <strong>Element</strong> interface declares a method for “accepting” visitors. This method should have one parameter declared with the type of the visitor interface.</li>
<li>Each <strong>Concrete Element</strong> must implement the acceptance method. The purpose of this method is to redirect the call to the proper visitor’s method corresponding to the current element class. Be aware that even if a base element class implements this method, all subclasses must still override this method in their own classes and call the appropriate method on the visitor object.</li>
<li>The <strong>Client</strong> usually represents a collection or some other complex object (for example, a <a href="https://refactoring.guru/design-patterns/composite">Composite</a> tree). Usually, clients aren’t aware of all the concrete element classes because they work with objects from that collection via some abstract interface.</li>
</ol>
<h3 id="pseudocode">Pseudocode</h3>
<p><img src="https://refactoring.guru/images/patterns/diagrams/visitor/example.png" alt="Structure of the Visitor pattern example"></p>
<pre><code class="language-pseudocode" data-lang="pseudocode">interface Shape is
    method move(x, y)
    method draw()
    method accept(v: Visitor)

class Dot implements Shape is
    // ...
    method accept(v: Visitor) is
        v.visitDot(this)

class Circle implements Shape is
    // ...
    method accept(v: Visitor) is
        v.visitCircle(this)

class Rectangle implements Shape is
    // ...
    method accept(v: Visitor) is
        v.visitRectangle(this)

class CompoundShape implements Shape is
    // ...
    method accept(v: Visitor) is
        v.visitCompoundShape(this)

interface Visitor is
    method visitDot(d: Dot)
    method visitCircle(c: Circle)
    method visitRectangle(r: Rectangle)
    method visitCompoundShape(cs: CompoundShape)

class XMLExportVisitor implements Visitor is
    method visitDot(d: Dot) is
        // Export the dot's ID and center coordinates.

    method visitCircle(c: Circle) is
        // Export the circle's ID, center coordinates and
        // radius.

    method visitRectangle(r: Rectangle) is
        // Export the rectangle's ID, left-top coordinates,
        // width and height.

    method visitCompoundShape(cs: CompoundShape) is
        // Export the shape's ID as well as the list of its
        // children's IDs.

class Application is
    field allShapes: array of Shapes

    method export() is
        exportVisitor = new XMLExportVisitor()

        foreach (shape in allShapes) do
            shape.accept(exportVisitor)
</code></pre><p>Applicability:</p>
<p><strong>when you need to perform an operation on all elements of a complex object structure (for example, an object tree).</strong></p>
<p>CompoundShape.accept(): means that: &ldquo;Hey visitor, come here and visit me&rdquo;</p>
<pre><code>accept(Visitor visitor){
	visitor.visit(this)
}
</code></pre><h2 id="singlebadmintontournamentvisitor">SingleBadmintonTournamentVisitor</h2>
<pre><code>visit(SingpleBadmintonTournament visitable){
	// visitable can be: composite or a leaf
	// increase level
	left.accept(this)
	right.accept(this)
	// decrease level
}
</code></pre><h1 id="exercise-2---visit-with-level">Exercise 2 - Visit with Level</h1>
<p><code>SingleBadmintonTournament_Visitor</code> is  a concrete class of <code>Visitor</code> contains an attribute <code>level : Integer</code>. In particular:</p>
<pre><code>class SingleBadmintonTournament_Visitor
	int level
  method visit(SingleBadmintonTournament tournament){
    // print tournament with current level
    
    // increase level when visit it children
    this.level++
    
    // visit the children
    visitable.left.accept(this) // &quot;this&quot; is current visitor, accepted by tournament
    visitable.right.accept(this)
    
    // decrease level when end visitting children
    this.level--
  }
</code></pre><p><strong>Note</strong>: We pass parent&rsquo;s visitor for the children =&gt; Parent&rsquo;s visitor = children&rsquo;s visitor.</p>
<p><img src="Visitor.assets/image-20200611120141624.png" alt="image-20200611120141624"></p>

    </div>
  </article>

  
  





  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Writings</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#structure">Structure</a>
      <ul>
        <li><a href="#pseudocode">Pseudocode</a></li>
      </ul>
    </li>
    <li><a href="#singlebadmintontournamentvisitor">SingleBadmintonTournamentVisitor</a></li>
  </ul>
</nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&text=">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&is_video=false&description=">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=&body=Check out this article: https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&title=">
      <i class="fab fa-digg fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&name=&description=Visitor%20-%20Day%2012%20The%20Visitor%20pattern%20helps%20adding%20the%20new%20behavior%20into%20a%20separate%20class%20called%20visitor%2c%20instead%20of%20trying%20to%20integrate%20it%20into%20existing%20classes%20%28change%20the%20existing%20classes%29.%0aThe%20new%20behavior%20acts%20as%20a%20method%20of%20visitor%2c%20takes%20the%20original%20object%20as%20an%20argument.%20The%20original%20object%20must%20%26ldquo%3ballow%26rdquo%3b%20visitor%20to%20access%20its%20data.%0aThe%20behavior%20can%20be%20executed%20over%20objects%20of%20different%20classes%2c%20the%20visitor%20class%20may%20define%20a%20set%20of%20methods%2c%20each%20of%20which%20could%20take%20arguments%20of%20different%20types%2c%20like%20this%3a">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fphatngluu.github.io%2fposts%2fsoftwaredesign%2fbehavioral%2fvisitor%2f&t=">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2020  You 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/js/main.js"></script>



</html>
